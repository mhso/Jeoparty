<!DOCTYPE html>
<html>
    {% include 'contestant/head.html' %}

    <body>
        <div id="contestant-lobby-wrapper">
            <h1>{{ _locale["welcome_header"] }}</h1>

            <form id="contestant-join-form" action="{{ url_for('contestant.join_lobby', _external=True) }}" method="post" enctype="multipart/form-data" onsubmit="return joinGame(event);">
                <div id="contestant-lobby-avatar-wrapper">
                    {% if is_default_avatar %}
                    <input id="contestant-lobby-default-avatar" type="hidden" name="default_avatar" value="1">
                    {% endif %}
                    <input id="contestant-lobby-avatar-input" type="file" name="avatar" accept=".png, .jpeg, .jpg, .webp" onchange="updateAvatarImg();">
                    <img id="contestant-lobby-avatar-img" src="{{ url_for('static', filename=avatar, _external=True) }}">
                </div>
    
                <input id="contestant-lobby-name" name="name" required{% if name %} value="{{ name }}" maxlength="16"{% endif %} placeholder="{{ _locale['placeholder_name'] }}">

                <label id="contestant-lobby-color-label" for="color">{{ _locale["color_label"] }}</label>
                <input id="contestant-lobby-color" name="color" type="color"{% if color %} value="{{ color }}"{% endif %}>

                {% if has_password %}
                <label id="contestant-lobby-password-label" for="password">Password</label>
                <input id="contestant-lobby-password" name="password" type="password">
                {% endif %}
                
                <input id="contestant-lobby-code" name="join_code" type="hidden" value="{{ join_code }}">

                <!-- Optional parameters -->
                {% if id %}<input name="user_id" type="hidden" value="{{ id }}">{% endif %}
    
                <input id="contestant-lobby-join" type="submit" value="{{ _locale['join'] }}">
            </form>
        </div>

        <div id="contestant-lobby-error" {% if not error %}class="d-none"{% endif %}>{{ error }}</div>
    </body>
    
    {% if not color %}
    <script>
        // Set random contestant color
        setRandomColor();
    </script>
    {% endif %}
</html>