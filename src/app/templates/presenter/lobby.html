<!DOCTYPE html>
<html>
    {% include 'head.html' %}
    
    <body>
        <div id="bg-image"></div>

        <div id="menu-wrapper">
            {% include 'jeopardy/logo.html' %}
            <h2>{{ title }}</h2>

            <div id="menu-lobby-url">Go to <span id="menu-join-url">{{ join_url }}</span>{% if password %} and provide the password{% endif %} to join!</div>

            <h3>Contestants</h3>
            <div id="menu-contestants">
                {% if not game_contestants %}
                <p id="menu-no-contestants-placeholder">Nobody yet...</p>
                {% endif %}
            </div>

            <img id="menu-naafiri" src="{{ url_for('static', _external=True, filename='img/naafiri_dance.gif') }}">
            <img id="menu-alistar" src="{{ url_for('static', _external=True, filename='img/alistar_dance.gif') }}">
            <img id="menu-teemo" src="{{ url_for('static', _external=True, filename='img/teemo_dance.gif') }}">
            <img id="menu-ivern" src="{{ url_for('static', _external=True, filename='img/ivern_dance.gif') }}">
            <img id="menu-brand" src="{{ url_for('static', _external=True, filename='img/brand_dance.gif') }}">
            <img id="menu-nidalee" src="{{ url_for('static', _external=True, filename='img/nidalee_dance.gif') }}">
            <img id="menu-quinn" src="{{ url_for('static', _external=True, filename='img/quinn_thonk.gif') }}">
            <img id="menu-vi" src="{{ url_for('static', _external=True, filename='img/vi_point.gif') }}">
        </div>

        {% if lobby_music %}
        <audio id="menu-lobby-music" loop>
            <source src="{{ url_for('static', _external=True, filename=lobby_music) }}" type="audio/mpeg">
        </audio>
        {% if lobby_music %}
    </body>

    <script>
        socket.on("connect", function() {
            socket.emit("presenter_joined");
            socket.on("player_joined", addPlayerDiv);
        });

        {% for contestant in game_contestants %}
        addPlayerDiv("{{ contestant['contestant_id'] }}", "{{ contestant['contestant']['name'] }}", "{{ contestant['contestant']['avatar'] }}", "{{ contestant['contestant']['color'] }}");
        {% endfor %}

        window.onkeydown = function(e) {
            if (e.code == PRESENTER_ACTION_KEY) {
                let audio = document.getElementById("menu-lobby-music");
                if (audio != null) {
                    audio.volume = 0.1;
                    audio.play();

                    setTimeout(function() {
                        window.onkeydown = function(e) {
                            if (e.code == PRESENTER_ACTION_KEY) {
                                beginJeopardy();
                            }
                        }
                    }, 1000);
                }
                else {
                    beginJeopardy();
                }
            }
        }
    </script>
</html>